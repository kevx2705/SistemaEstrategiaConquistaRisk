<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
	xmlns:h="http://xmlns.jcp.org/jsf/html"
	xmlns:f="http://xmlns.jcp.org/jsf/core"
	xmlns:p="http://primefaces.org/ui"> <ui:composition
	template="template/template.xhtml">
	<ui:define name="content">

		<div class="risk-background"> <div class="game-wrapper"> <h1
			class="game-title">Conquista</h1> <div class="game-columns"> <div
			class="left-column"> <div class="game-board"> <img
			src="assets/mapRisk.jpg" alt="Mapa Risk" class="risk-map" /> <!-- Botones de territorios -->
		<button class="territory-point" style="top: 80px; left: 60px;"
			onclick="showTerritory('Alaska','Jugador 1',5)"></button> <button
			class="territory-point" style="top: 70px; left: 110px;"
			onclick="showTerritory('Alberta','Jugador 2',4)"></button> <!-- ... más botones ... -->
		</div> <!-- Diálogo de acciones en territorio --> <p:dialog
			widgetVar="territoryDialog" modal="true"
			header="Acciones en territorio" styleClass="dialog-risk"
			responsive="true" closable="true" width="400">
			<div class="territory-info"> <p>
			<strong>Territorio:</strong> <span id="territoryName"></span></p> <p>
			<strong>Dueño:</strong> <span id="territoryOwner"></span></p> <p>
			<strong>Tropas:</strong> <span id="territoryTroops"></span></p> </div>
			<p:separator />
			<div class="dialog-options"> <p:commandButton value="Atacar"
				icon="pi pi-bolt" onclick="PF('attackDialog').show()"
				styleClass="play-button" /> <p:commandButton value="Mover tropas"
				icon="pi pi-arrow-right" onclick="PF('moveDialog').show()"
				styleClass="play-button" /> <p:commandButton value="Reforzar"
				icon="pi pi-plus" onclick="PF('reinforceDialog').show()"
				styleClass="play-button" /> </div>
		</p:dialog> <!-- Diálogo de ataque --> <p:dialog widgetVar="attackDialog"
			header="Atacar territorio" modal="true" closable="true"
			draggable="true" resizable="false" width="450"
			styleClass="dialog-risk">
			<h:form>
				<p class="modal-title">Selecciona los territorios y tropas para
				atacar</p>
				<div class="modal-content"> <h:outputLabel
					value="Desde (tu territorio):" for="fromTerritory" /> <h:selectOneMenu
					id="fromTerritory" value="#{gameBean.fromTerritory}">
					<f:selectItem itemLabel="Selecciona" itemValue="" />
					<f:selectItems value="#{gameBean.territoriosAliados}" var="t"
						itemLabel="#{t}" itemValue="#{t}" />
				</h:selectOneMenu> <h:outputLabel value="Hacia (territorio enemigo):"
					for="toTerritory" /> <h:selectOneMenu id="toTerritory"
					value="#{gameBean.toTerritory}">
					<f:selectItem itemLabel="Selecciona" itemValue="" />
					<f:selectItems value="#{gameBean.territoriosEnemigos}" var="t"
						itemLabel="#{t}" itemValue="#{t}" />
				</h:selectOneMenu> <h:outputLabel value="Tropas a usar:" for="troopsToUse" /> <p:inputText
					id="troopsToUse" value="#{gameBean.tropasParaAtacar}" type="number"
					min="1" max="3" /> <p class="modal-note">Regla: Máximo 3 dados
				para atacar. Debes dejar al menos 1 tropa en el territorio origen.</p> <div
					class="modal-buttons"> <p:commandButton
					value="Confirmar ataque" action="#{gameBean.confirmarAtaque}"
					update=":dicePanel :turnInfo" styleClass="btn-action"
					oncomplete="PF('attackDialog').hide()" /> <p:commandButton
					value="Cancelar" onclick="PF('attackDialog').hide()"
					styleClass="btn-cancel" /> </div> </div>
			</h:form>
		</p:dialog> <!-- Diálogo de movimiento --> <p:dialog widgetVar="moveDialog"
			header="Mover tropas" modal="true" closable="true" draggable="true"
			resizable="false" width="450" styleClass="dialog-risk">
			<h:form>
				<p class="modal-title">Selecciona los territorios para mover
				tropas</p>
				<div class="modal-content"> <h:outputLabel
					value="Desde (tu territorio):" for="fromMoveTerritory" /> <h:selectOneMenu
					id="fromMoveTerritory" value="#{gameBean.fromMoveTerritory}">
					<f:selectItem itemLabel="Selecciona" itemValue="" />
					<f:selectItems value="#{gameBean.territoriosAliados}" var="t"
						itemLabel="#{t}" itemValue="#{t}" />
				</h:selectOneMenu> <h:outputLabel value="Hacia (territorio aliado):"
					for="toMoveTerritory" /> <h:selectOneMenu id="toMoveTerritory"
					value="#{gameBean.toMoveTerritory}">
					<f:selectItem itemLabel="Selecciona" itemValue="" />
					<f:selectItems value="#{gameBean.territoriosConectados}" var="t"
						itemLabel="#{t}" itemValue="#{t}" />
				</h:selectOneMenu> <h:outputLabel value="Tropas a mover:" for="troopsToMove" /> <p:inputText
					id="troopsToMove" value="#{gameBean.tropasAMover}" type="number"
					min="1" max="10" /> <p class="modal-note">Regla: Solo entre
				territorios conectados y debes dejar al menos 1 tropa en el origen.</p>

				<div class="modal-buttons"> <p:commandButton
					value="Confirmar movimiento"
					action="#{gameBean.confirmarMovimiento}" update="@form"
					styleClass="btn-action" oncomplete="PF('moveDialog').hide()" /> <p:commandButton
					value="Cancelar" onclick="PF('moveDialog').hide()"
					styleClass="btn-cancel" /> </div> </div>
			</h:form>
		</p:dialog> <!-- Diálogo de refuerzo --> <p:dialog widgetVar="reinforceDialog"
			header="Reforzar territorio" modal="true" closable="true"
			draggable="true" resizable="false" width="450"
			styleClass="dialog-risk">
			<h:form>
				<p class="modal-title">Agrega tropas a uno de tus territorios</p>
				<div class="modal-content"> <h:outputLabel
					value="Territorio a reforzar:" for="reinforceTerritory" /> <h:selectOneMenu
					id="reinforceTerritory" value="#{gameBean.territorioAReforzar}">
					<f:selectItem itemLabel="Selecciona" itemValue="" />
					<f:selectItems value="#{gameBean.territoriosAliados}" var="t"
						itemLabel="#{t}" itemValue="#{t}" />
				</h:selectOneMenu> <h:outputLabel value="Tropas a agregar:" for="troopsToAdd" /> <p:inputText
					id="troopsToAdd" value="#{gameBean.tropasAReforzar}" type="number"
					min="1" max="5" /> <p class="modal-note">Regla: Reforzar solo
				al inicio del turno con tropas disponibles.</p> <div
					class="modal-buttons"> <p:commandButton
					value="Confirmar refuerzo" action="#{gameBean.confirmarRefuerzo}"
					update="@form" styleClass="btn-action"
					oncomplete="PF('reinforceDialog').hide()" /> <p:commandButton
					value="Cancelar" onclick="PF('reinforceDialog').hide()"
					styleClass="btn-cancel" /> </div> </div>
			</h:form>
		</p:dialog> <div> <button class="btn-show-players"
			onclick="PF('playersDialog').show()">Ver jugadores en
		partida</button> </div> </div> <div class="right-column"> <!-- Panel de dados --> <p:panel
			id="dicePanel" header="Dados de ataque y defensa">
			<div class="dice-container"> <div class="dice-group"> <p>Atacante
			(máx 3):</p> <div class="dice attacker-dice"> <ui:repeat
				value="#{gameBean.attackerDice}" var="die">
				<span class="die">#{die}</span>
			</ui:repeat> </div> </div> <div class="dice-group"> <p>Defensor (máx 2):</p> <div
				class="dice defender-dice"> <ui:repeat
				value="#{gameBean.defenderDice}" var="die">
				<span class="die">#{die}</span>
			</ui:repeat> </div> </div> </div>
			<p:commandButton value="Lanzar dados" action="#{gameBean.rollDice}"
				update=":dicePanel" styleClass="btn-roll" />
		</p:panel> <!-- Panel de turno --> <p:panel id="turnInfo" header="Turno actual">
			<p>
			<strong>Jugador:</strong> <span>#{gameBean.currentPlayer}</span></p>
			<p>
			<strong>Territorios controlados:</strong> <span>#{gameBean.territories}</span></p>
			<p>
			<strong>Tropas disponibles:</strong> <span>#{gameBean.troops}</span></p>
			<p:commandButton value="Terminar turno" action="#{gameBean.nextTurn}"
				update=":turnInfo :dicePanel :playersDialog" styleClass="btn-turn" />
		</p:panel> <p:dialog widgetVar="playersDialog" modal="true"
			header="Jugadores en partida" styleClass="dialog-risk"
			responsive="true" closable="true" width="500">
			<div class="player-cards-row"> <ui:repeat
				value="#{gameBean.players}" var="player" varStatus="status">
				<div
					class="player-card #{status.index == gameBean.currentPlayerIndex ? 'active-player' : ''}">
				<div class="player-info"> <p class="player-name">#{player}</p>
				<p class="player-territories">Territorios:
				#{gameBean.getTerritoriosPorJugador(player)}</p> <p
					class="player-troops">Tropas:
				#{gameBean.getTropasPorJugador(player)}</p> </div> </div>
			</ui:repeat> </div>
		</p:dialog> </div> </div> </div> </div>

		<script>
			function showTerritory(name, owner, troops) {
				document.getElementById('territoryName').textContent = name;
				document.getElementById('territoryOwner').textContent = owner;
				document.getElementById('territoryTroops').textContent = troops;
				PF('territoryDialog').show();
			}
		</script>

	</ui:define>
</ui:composition> </html>
